{"ast":null,"code":"import { notification } from \"antd\";\nimport history from \"@/utils/history\";\nimport codeMessage from \"./codeMessage\";\n\nconst errorHandler = function (error) {\n  let emptyResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const {\n    response\n  } = error;\n\n  if (!response) {\n    // notification.config({\n    //   duration: 20,\n    // });\n    // notification.error({\n    //   message: \"No internet connection\",\n    //   description: \"Cannot connect to the server, Check your internet network\",\n    // });\n    return {\n      success: false,\n      result: emptyResult,\n      message: \"Cannot connect to the server, Check your internet network\"\n    };\n  } else if (response && response.status) {\n    const message = response.data && response.data.message;\n    const errorText = message || codeMessage[response.status];\n    const {\n      status\n    } = response;\n    notification.config({\n      duration: 20\n    });\n    notification.error({\n      message: `Request error ${status}`,\n      description: errorText\n    });\n\n    if (error.response.data.jwtExpired) {\n      history.push(\"/logout\");\n    }\n\n    return response.data;\n  } else {\n    notification.config({\n      duration: 20\n    });\n    notification.error({\n      message: \"Unknown Error\",\n      description: \"An unknown error occurred in the app, please try again. \"\n    });\n    return {\n      success: false,\n      result: emptyResult,\n      message: \"An unknown error occurred in the app, please try again. \"\n    };\n  }\n};\n\nexport default errorHandler;","map":{"version":3,"names":["notification","history","codeMessage","errorHandler","error","emptyResult","response","success","result","message","status","data","errorText","config","duration","description","jwtExpired","push"],"sources":["D:/mock-reactjs/frontend-new/src/request/errorHandler.js"],"sourcesContent":["import { notification } from \"antd\";\r\nimport history from \"@/utils/history\";\r\nimport codeMessage from \"./codeMessage\";\r\n\r\nconst errorHandler = (error, emptyResult = null) => {\r\n  const { response } = error;\r\n\r\n  if (!response) {\r\n    // notification.config({\r\n    //   duration: 20,\r\n    // });\r\n    // notification.error({\r\n    //   message: \"No internet connection\",\r\n    //   description: \"Cannot connect to the server, Check your internet network\",\r\n    // });\r\n    return {\r\n      success: false,\r\n      result: emptyResult,\r\n      message: \"Cannot connect to the server, Check your internet network\",\r\n    };\r\n  } else if (response && response.status) {\r\n    const message = response.data && response.data.message;\r\n    const errorText = message || codeMessage[response.status];\r\n    const { status } = response;\r\n    notification.config({\r\n      duration: 20,\r\n    });\r\n    notification.error({\r\n      message: `Request error ${status}`,\r\n      description: errorText,\r\n    });\r\n    if (error.response.data.jwtExpired) {\r\n      history.push(\"/logout\");\r\n    }\r\n    return response.data;\r\n  } else {\r\n    notification.config({\r\n      duration: 20,\r\n    });\r\n    notification.error({\r\n      message: \"Unknown Error\",\r\n      description: \"An unknown error occurred in the app, please try again. \",\r\n    });\r\n    return {\r\n      success: false,\r\n      result: emptyResult,\r\n      message: \"An unknown error occurred in the app, please try again. \",\r\n    };\r\n  }\r\n};\r\n\r\nexport default errorHandler;\r\n"],"mappings":"AAAA,SAASA,YAAT,QAA6B,MAA7B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,MAAMC,YAAY,GAAG,UAACC,KAAD,EAA+B;EAAA,IAAvBC,WAAuB,uEAAT,IAAS;EAClD,MAAM;IAAEC;EAAF,IAAeF,KAArB;;EAEA,IAAI,CAACE,QAAL,EAAe;IACb;IACA;IACA;IACA;IACA;IACA;IACA;IACA,OAAO;MACLC,OAAO,EAAE,KADJ;MAELC,MAAM,EAAEH,WAFH;MAGLI,OAAO,EAAE;IAHJ,CAAP;EAKD,CAbD,MAaO,IAAIH,QAAQ,IAAIA,QAAQ,CAACI,MAAzB,EAAiC;IACtC,MAAMD,OAAO,GAAGH,QAAQ,CAACK,IAAT,IAAiBL,QAAQ,CAACK,IAAT,CAAcF,OAA/C;IACA,MAAMG,SAAS,GAAGH,OAAO,IAAIP,WAAW,CAACI,QAAQ,CAACI,MAAV,CAAxC;IACA,MAAM;MAAEA;IAAF,IAAaJ,QAAnB;IACAN,YAAY,CAACa,MAAb,CAAoB;MAClBC,QAAQ,EAAE;IADQ,CAApB;IAGAd,YAAY,CAACI,KAAb,CAAmB;MACjBK,OAAO,EAAG,iBAAgBC,MAAO,EADhB;MAEjBK,WAAW,EAAEH;IAFI,CAAnB;;IAIA,IAAIR,KAAK,CAACE,QAAN,CAAeK,IAAf,CAAoBK,UAAxB,EAAoC;MAClCf,OAAO,CAACgB,IAAR,CAAa,SAAb;IACD;;IACD,OAAOX,QAAQ,CAACK,IAAhB;EACD,CAfM,MAeA;IACLX,YAAY,CAACa,MAAb,CAAoB;MAClBC,QAAQ,EAAE;IADQ,CAApB;IAGAd,YAAY,CAACI,KAAb,CAAmB;MACjBK,OAAO,EAAE,eADQ;MAEjBM,WAAW,EAAE;IAFI,CAAnB;IAIA,OAAO;MACLR,OAAO,EAAE,KADJ;MAELC,MAAM,EAAEH,WAFH;MAGLI,OAAO,EAAE;IAHJ,CAAP;EAKD;AACF,CA7CD;;AA+CA,eAAeN,YAAf"},"metadata":{},"sourceType":"module"}